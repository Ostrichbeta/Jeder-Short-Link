import{h as D,c as K,r as W,g as Se,W as G,X as we,Y as J,q as E,f as se,o as A,l as V,Z as Ce,$ as q,a0 as ee,a1 as He,F as Me,a2 as ke,a3 as Pe,a4 as We,a5 as ce,a6 as qe,a as C,a7 as Le,v as Be,x as Ae,a8 as ze,a9 as Fe,aa as $e,ab as Oe,ac as Re,ad as je,ae as te,af as de,ag as De,d as Qe,ah as Ke,ai as Ve,aj as Ne,ak as Ie,s as Xe,al as Ye,am as _e,an as Ue}from"./index.5c8aeb45.js";import{c as Ze}from"./QResizeObserver.7f90d0fa.js";const Ge=D("div",{class:"q-space"});var ft=K({name:"QSpace",setup(){return()=>Ge}});const Je={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},et={...Je,contextMenu:Boolean};function tt({showing:e,avoidEmit:o,configureAnchorEl:n}){const{props:t,proxy:i,emit:c}=V(),a=W(null);let f=null;function h(l){return a.value===null?!1:l===void 0||l.touches===void 0||l.touches.length<=1}const u={};n===void 0&&(Object.assign(u,{hide(l){i.hide(l)},toggle(l){i.toggle(l),l.qAnchorHandled=!0},toggleKey(l){Se(l,13)===!0&&u.toggle(l)},contextClick(l){i.hide(l),G(l),we(()=>{i.show(l),l.qAnchorHandled=!0})},prevent:G,mobileTouch(l){if(u.mobileCleanup(l),h(l)!==!0)return;i.hide(l),a.value.classList.add("non-selectable");const s=l.target;J(u,"anchor",[[s,"touchmove","mobileCleanup","passive"],[s,"touchend","mobileCleanup","passive"],[s,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),f=setTimeout(()=>{f=null,i.show(l),l.qAnchorHandled=!0},300)},mobileCleanup(l){a.value.classList.remove("non-selectable"),f!==null&&(clearTimeout(f),f=null),e.value===!0&&l!==void 0&&Ze()}}),n=function(l=t.contextMenu){if(t.noParentEvent===!0||a.value===null)return;let s;l===!0?i.$q.platform.is.mobile===!0?s=[[a.value,"touchstart","mobileTouch","passive"]]:s=[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:s=[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],J(u,"anchor",s)});function d(){Ce(u,"anchor")}function m(l){for(a.value=l;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;n()}function v(){if(t.target===!1||t.target===""||i.$el.parentNode===null)a.value=null;else if(t.target===!0)m(i.$el.parentNode);else{let l=t.target;if(typeof t.target=="string")try{l=document.querySelector(t.target)}catch{l=void 0}l!=null?(a.value=l.$el||l,n()):(a.value=null,console.error(`Anchor: target "${t.target}" not found`))}}return E(()=>t.contextMenu,l=>{a.value!==null&&(d(),n(l))}),E(()=>t.target,()=>{a.value!==null&&d(),v()}),E(()=>t.noParentEvent,l=>{a.value!==null&&(l===!0?d():n())}),se(()=>{v(),o!==!0&&t.modelValue===!0&&a.value===null&&c("update:modelValue",!1)}),A(()=>{f!==null&&clearTimeout(f),d()}),{anchorEl:a,canShow:h,anchorEvents:u}}function nt(e,o){const n=W(null);let t;function i(f,h){const u=`${h!==void 0?"add":"remove"}EventListener`,d=h!==void 0?h:t;f!==window&&f[u]("scroll",d,q.passive),window[u]("scroll",d,q.passive),t=h}function c(){n.value!==null&&(i(n.value),n.value=null)}const a=E(()=>e.noParentEvent,()=>{n.value!==null&&(c(),o())});return A(a),{localScrollTarget:n,unconfigureScrollTarget:c,changeScrollEvent:i}}const{notPassiveCapture:L}=q,S=[];function B(e){const o=e.target;if(o===void 0||o.nodeType===8||o.classList.contains("no-pointer-events")===!0)return;let n=ee.length-1;for(;n>=0;){const t=ee[n].$;if(t.type.name==="QTooltip"){n--;continue}if(t.type.name!=="QDialog")break;if(t.props.seamless!==!0)return;n--}for(let t=S.length-1;t>=0;t--){const i=S[t];if((i.anchorEl.value===null||i.anchorEl.value.contains(o)===!1)&&(o===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(o)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function ot(e){S.push(e),S.length===1&&(document.addEventListener("mousedown",B,L),document.addEventListener("touchstart",B,L))}function ne(e){const o=S.findIndex(n=>n===e);o!==-1&&(S.splice(o,1),S.length===0&&(document.removeEventListener("mousedown",B,L),document.removeEventListener("touchstart",B,L)))}let oe,le;function ie(e){const o=e.split(" ");return o.length!==2?!1:["top","center","bottom"].includes(o[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(o[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function lt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Q={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Q[`${e}#ltr`]=e,Q[`${e}#rtl`]=e});function ae(e,o){const n=e.split(" ");return{vertical:n[0],horizontal:Q[`${n[1]}#${o===!0?"rtl":"ltr"}`]}}function it(e,o){let{top:n,left:t,right:i,bottom:c,width:a,height:f}=e.getBoundingClientRect();return o!==void 0&&(n-=o[1],t-=o[0],c+=o[1],i+=o[0],a+=o[0],f+=o[1]),{top:n,bottom:c,height:f,left:t,right:i,width:a,middle:t+(i-t)/2,center:n+(c-n)/2}}function at(e,o,n){let{top:t,left:i}=e.getBoundingClientRect();return t+=o.top,i+=o.left,n!==void 0&&(t+=n[1],i+=n[0]),{top:t,bottom:t+1,height:1,left:i,right:i+1,width:1,middle:i,center:t}}function rt(e,o){return{top:0,center:o/2,bottom:o,left:0,middle:e/2,right:e}}function re(e,o,n,t){return{top:e[n.vertical]-o[t.vertical],left:e[n.horizontal]-o[t.horizontal]}}function fe(e,o=0){if(e.targetEl===null||e.anchorEl===null||o>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{fe(e,o+1)},10);return}const{targetEl:n,offset:t,anchorEl:i,anchorOrigin:c,selfOrigin:a,absoluteOffset:f,fit:h,cover:u,maxHeight:d,maxWidth:m}=e;if(He.is.ios===!0&&window.visualViewport!==void 0){const w=document.body.style,{offsetLeft:p,offsetTop:b}=window.visualViewport;p!==oe&&(w.setProperty("--q-pe-left",p+"px"),oe=p),b!==le&&(w.setProperty("--q-pe-top",b+"px"),le=b)}const{scrollLeft:v,scrollTop:l}=n,s=f===void 0?it(i,u===!0?[0,0]:t):at(i,f,t);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:m||"100vw",maxHeight:d||"100vh",visibility:"visible"});const{offsetWidth:k,offsetHeight:H}=n,{elWidth:P,elHeight:z}=h===!0||u===!0?{elWidth:Math.max(s.width,k),elHeight:u===!0?Math.max(s.height,H):H}:{elWidth:k,elHeight:H};let x={maxWidth:m,maxHeight:d};(h===!0||u===!0)&&(x.minWidth=s.width+"px",u===!0&&(x.minHeight=s.height+"px")),Object.assign(n.style,x);const y=rt(P,z);let g=re(s,y,c,a);if(f===void 0||t===void 0)j(g,s,y,c,a);else{const{top:w,left:p}=g;j(g,s,y,c,a);let b=!1;if(g.top!==w){b=!0;const T=2*t[1];s.center=s.top-=T,s.bottom-=T+2}if(g.left!==p){b=!0;const T=2*t[0];s.middle=s.left-=T,s.right-=T+2}b===!0&&(g=re(s,y,c,a),j(g,s,y,c,a))}x={top:g.top+"px",left:g.left+"px"},g.maxHeight!==void 0&&(x.maxHeight=g.maxHeight+"px",s.height>g.maxHeight&&(x.minHeight=x.maxHeight)),g.maxWidth!==void 0&&(x.maxWidth=g.maxWidth+"px",s.width>g.maxWidth&&(x.minWidth=x.maxWidth)),Object.assign(n.style,x),n.scrollTop!==l&&(n.scrollTop=l),n.scrollLeft!==v&&(n.scrollLeft=v)}function j(e,o,n,t,i){const c=n.bottom,a=n.right,f=Me(),h=window.innerHeight-f,u=document.body.clientWidth;if(e.top<0||e.top+c>h)if(i.vertical==="center")e.top=o[t.vertical]>h/2?Math.max(0,h-c):0,e.maxHeight=Math.min(c,h);else if(o[t.vertical]>h/2){const d=Math.min(h,t.vertical==="center"?o.center:t.vertical===i.vertical?o.bottom:o.top);e.maxHeight=Math.min(c,d),e.top=Math.max(0,d-c)}else e.top=Math.max(0,t.vertical==="center"?o.center:t.vertical===i.vertical?o.top:o.bottom),e.maxHeight=Math.min(c,h-e.top);if(e.left<0||e.left+a>u)if(e.maxWidth=Math.min(a,u),i.horizontal==="middle")e.left=o[t.horizontal]>u/2?Math.max(0,u-a):0;else if(o[t.horizontal]>u/2){const d=Math.min(u,t.horizontal==="middle"?o.middle:t.horizontal===i.horizontal?o.right:o.left);e.maxWidth=Math.min(a,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,t.horizontal==="middle"?o.middle:t.horizontal===i.horizontal?o.left:o.right),e.maxWidth=Math.min(a,u-e.left)}var ht=K({name:"QMenu",inheritAttrs:!1,props:{...et,...ke,...Pe,...We,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:ie},self:{type:String,validator:ie},offset:{type:Array,validator:lt},scrollTarget:ce,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...qe,"click","escapeKey"],setup(e,{slots:o,emit:n,attrs:t}){let i=null,c,a,f;const h=V(),{proxy:u}=h,{$q:d}=u,m=W(null),v=W(!1),l=C(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),s=Le(e,d),{registerTick:k,removeTick:H}=Be(),{registerTimeout:P}=Ae(),{transitionProps:z,transitionStyle:x}=ze(e),{localScrollTarget:y,changeScrollEvent:g,unconfigureScrollTarget:w}=nt(e,U),{anchorEl:p,canShow:b}=tt({showing:v}),{hide:T}=Fe({showing:v,canShow:b,handleShow:xe,handleHide:pe,hideOnRouteChange:l,processOnMount:!0}),{showPortal:N,hidePortal:I,renderPortal:he}=$e(h,m,ye,"menu"),F={anchorEl:p,innerRef:m,onClickOutside(r){if(e.persistent!==!0&&v.value===!0)return T(r),(r.type==="touchstart"||r.target.classList.contains("q-dialog__backdrop"))&&Xe(r),!0}},X=C(()=>ae(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),me=C(()=>e.cover===!0?X.value:ae(e.self||"top start",d.lang.rtl)),ve=C(()=>(e.square===!0?" q-menu--square":"")+(s.value===!0?" q-menu--dark q-dark":"")),ge=C(()=>e.autoClose===!0?{onClick:be}:{}),Y=C(()=>v.value===!0&&e.persistent!==!0);E(Y,r=>{r===!0?(Ve(O),ot(F)):(te(O),ne(F))});function $(){Ne(()=>{let r=m.value;r&&r.contains(document.activeElement)!==!0&&(r=r.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.querySelector("[autofocus], [data-autofocus]")||r,r.focus({preventScroll:!0}))})}function xe(r){if(i=e.noRefocus===!1?document.activeElement:null,Oe(Z),N(),U(),c=void 0,r!==void 0&&(e.touchPosition||e.contextMenu)){const R=Re(r);if(R.left!==void 0){const{top:Te,left:Ee}=p.value.getBoundingClientRect();c={left:R.left-Ee,top:R.top-Te}}}a===void 0&&(a=E(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,M)),e.noFocus!==!0&&document.activeElement.blur(),k(()=>{M(),e.noFocus!==!0&&$()}),P(()=>{d.platform.is.ios===!0&&(f=e.autoClose,m.value.click()),M(),N(!0),n("show",r)},e.transitionDuration)}function pe(r){H(),I(),_(!0),i!==null&&(r===void 0||r.qClickOutside!==!0)&&(((r&&r.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),P(()=>{I(!0),n("hide",r)},e.transitionDuration)}function _(r){c=void 0,a!==void 0&&(a(),a=void 0),(r===!0||v.value===!0)&&(je(Z),w(),ne(F),te(O)),r!==!0&&(i=null)}function U(){(p.value!==null||e.scrollTarget!==void 0)&&(y.value=de(p.value,e.scrollTarget),g(y.value,M))}function be(r){f!==!0?(De(u,r),n("click",r)):f=!1}function Z(r){Y.value===!0&&e.noFocus!==!0&&Ie(m.value,r.target)!==!0&&$()}function O(r){n("escapeKey"),T(r)}function M(){fe({targetEl:m.value,offset:e.offset,anchorEl:p.value,anchorOrigin:X.value,selfOrigin:me.value,absoluteOffset:c,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ye(){return D(Ke,z.value,()=>v.value===!0?D("div",{role:"menu",...t,ref:m,tabindex:-1,class:["q-menu q-position-engine scroll"+ve.value,t.class],style:[t.style,x.value],...ge.value},Qe(o.default)):null)}return A(_),Object.assign(u,{focus:$,updatePosition:M}),he}});let ut=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,ut=e.scrollLeft>=0,e.remove()}const{passive:ue}=q,st=["both","horizontal","vertical"];var mt=K({name:"QScrollObserver",props:{axis:{type:String,validator:e=>st.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ce},emits:["scroll"],setup(e,{emit:o}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,i,c;E(()=>e.scrollTarget,()=>{h(),f()});function a(){t!==null&&t();const m=Math.max(0,_e(i)),v=Ue(i),l={top:m-n.position.top,left:v-n.position.left};if(e.axis==="vertical"&&l.top===0||e.axis==="horizontal"&&l.left===0)return;const s=Math.abs(l.top)>=Math.abs(l.left)?l.top<0?"up":"down":l.left<0?"left":"right";n.position={top:m,left:v},n.directionChanged=n.direction!==s,n.delta=l,n.directionChanged===!0&&(n.direction=s,n.inflectionPoint=n.position),o("scroll",{...n})}function f(){i=de(c,e.scrollTarget),i.addEventListener("scroll",u,ue),u(!0)}function h(){i!==void 0&&(i.removeEventListener("scroll",u,ue),i=void 0)}function u(m){if(m===!0||e.debounce===0||e.debounce==="0")a();else if(t===null){const[v,l]=e.debounce?[setTimeout(a,e.debounce),clearTimeout]:[requestAnimationFrame(a),cancelAnimationFrame];t=()=>{l(v),t=null}}}const{proxy:d}=V();return E(()=>d.$q.lang.rtl,a),se(()=>{c=d.$el.parentNode,f()}),A(()=>{t!==null&&t(),h()}),Object.assign(d,{trigger:u,getPosition:()=>n}),Ye}});export{mt as Q,ft as a,ht as b,ut as r};
